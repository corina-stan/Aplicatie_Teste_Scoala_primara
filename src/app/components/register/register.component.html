<div class="register-container">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-8 col-lg-6">
        <div class="card shadow-lg">
          <div class="card-body p-5">
            <!-- Logo și titlu -->
            <div class="text-center mb-4">
              <i class="bi bi-person-plus-fill text-primary" style="font-size: 3rem;"></i>
              <h2 class="mt-3 mb-1">Creare Cont Nou</h2>
              <p class="text-muted">Completează datele pentru a te înregistra</p>
            </div>

            <!-- Mesaj de success -->
            <div *ngIf="success" class="alert alert-success alert-dismissible fade show" role="alert">
              <i class="bi bi-check-circle-fill me-2"></i>
              <strong>Cont creat cu succes!</strong> Vei fi redirecționat către pagina de login...
            </div>

            <!-- Mesaj de eroare -->
            <div *ngIf="error" class="alert alert-danger alert-dismissible fade show" role="alert">
              <i class="bi bi-exclamation-triangle-fill me-2"></i>
              {{ error }}
              <button type="button" class="btn-close" (click)="error = ''" aria-label="Close"></button>
            </div>

            <!-- Formular de înregistrare -->
            <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" *ngIf="!success">
              <!-- Nume complet -->
              <div class="mb-3">
                <label for="name" class="form-label">
                  <i class="bi bi-person me-2"></i>Nume complet
                </label>
                <input 
                  type="text" 
                  class="form-control" 
                  id="name"
                  formControlName="name"
                  [class.is-invalid]="submitted && f['name'].errors"
                  placeholder="Ex: Ion Popescu"
                >
                <div *ngIf="submitted && f['name'].errors" class="invalid-feedback">
                  <div *ngIf="f['name'].errors['required']">Numele este obligatoriu</div>
                </div>
              </div>

              <!-- Email -->
              <div class="mb-3">
                <label for="email" class="form-label">
                  <i class="bi bi-envelope me-2"></i>Email
                </label>
                <input 
                  type="email" 
                  class="form-control" 
                  id="email"
                  formControlName="email"
                  [class.is-invalid]="submitted && f['email'].errors"
                  placeholder="exemplu@email.ro"
                >
                <div *ngIf="submitted && f['email'].errors" class="invalid-feedback">
                  <div *ngIf="f['email'].errors['required']">Email-ul este obligatoriu</div>
                  <div *ngIf="f['email'].errors['email']">Email-ul nu este valid</div>
                </div>
              </div>

              <!-- Tip utilizator -->
              <div class="mb-3">
                <label class="form-label">
                  <i class="bi bi-person-badge me-2"></i>Tip utilizator
                </label>
                <div class="role-selection">
                  <div class="form-check role-option" 
                       [class.selected]="f['role'].value === 'parent'"
                       (click)="registerForm.patchValue({role: 'parent'})">
                    <input 
                      class="form-check-input" 
                      type="radio" 
                      name="role" 
                      id="roleParent"
                      value="parent"
                      formControlName="role"
                    >
                    <label class="form-check-label w-100" for="roleParent">
                      <div class="d-flex align-items-center">
                        <i [class]="'bi ' + getRoleIcon('parent') + ' me-3 role-icon text-success'"></i>
                        <div>
                          <strong>Părinte</strong>
                          <p class="mb-0 small text-muted">{{ getRoleDescription('parent') }}</p>
                        </div>
                      </div>
                    </label>
                  </div>

                  <div class="form-check role-option" 
                       [class.selected]="f['role'].value === 'child'"
                       (click)="registerForm.patchValue({role: 'child'})">
                    <input 
                      class="form-check-input" 
                      type="radio" 
                      name="role" 
                      id="roleChild"
                      value="child"
                      formControlName="role"
                    >
                    <label class="form-check-label w-100" for="roleChild">
                      <div class="d-flex align-items-center">
                        <i [class]="'bi ' + getRoleIcon('child') + ' me-3 role-icon text-info'"></i>
                        <div>
                          <strong>Elev</strong>
                          <p class="mb-0 small text-muted">{{ getRoleDescription('child') }}</p>
                        </div>
                      </div>
                    </label>
                  </div>
                </div>
                <div *ngIf="submitted && f['role'].errors" class="text-danger small mt-1">
                  <div *ngIf="f['role'].errors['required']">Trebuie să selectezi un tip de utilizator</div>
                </div>
              </div>

              <!-- Parolă -->
              <div class="mb-3">
                <label for="password" class="form-label">
                  <i class="bi bi-lock me-2"></i>Parolă
                </label>
                <input 
                  type="password" 
                  class="form-control" 
                  id="password"
                  formControlName="password"
                  [class.is-invalid]="submitted && f['password'].errors"
                  placeholder="Minimum 6 caractere"
                >
                <div *ngIf="submitted && f['password'].errors" class="invalid-feedback">
                  <div *ngIf="f['password'].errors['required']">Parola este obligatorie</div>
                  <div *ngIf="f['password'].errors['minlength']">Parola trebuie să aibă minim 6 caractere</div>
                </div>
              </div>

              <!-- Confirmare parolă -->
              <div class="mb-4">
                <label for="confirmPassword" class="form-label">
                  <i class="bi bi-lock-fill me-2"></i>Confirmă parola
                </label>
                <input 
                  type="password" 
                  class="form-control" 
                  id="confirmPassword"
                  formControlName="confirmPassword"
                  [class.is-invalid]="submitted && (f['confirmPassword'].errors || registerForm.errors?.['mismatch'])"
                  placeholder="Reintroduceți parola"
                >
                <div *ngIf="submitted && f['confirmPassword'].errors" class="invalid-feedback">
                  <div *ngIf="f['confirmPassword'].errors['required']">Confirmarea parolei este obligatorie</div>
                </div>
                <div *ngIf="submitted && registerForm.errors?.['mismatch']" class="text-danger small mt-1">
                  Parolele nu se potrivesc
                </div>
              </div>

              <!-- Buton înregistrare -->
              <button 
                type="submit" 
                class="btn btn-primary w-100 mb-3"
                [disabled]="loading"
              >
                <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
                <i *ngIf="!loading" class="bi bi-person-plus me-2"></i>
                {{ loading ? 'Se creează contul...' : 'Creează cont' }}
              </button>

              <!-- Link către login -->
              <div class="text-center">
                <p class="text-muted mb-0">
                  Ai deja cont? 
                  <a routerLink="/login" class="text-decoration-none fw-bold">
                    Autentifică-te aici
                  </a>
                </p>
              </div>
            </form>
          </div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-3">
          <p class="text-muted small">
            <i class="bi bi-c-circle me-1"></i>
            2024 Teste Școlare - Platformă educațională
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
